<template>
    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large"
    aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">
    <div class="slds-modal__container slds-is-relative" style="width: 96%;">
        <template if:true={showSpinner}>
            <lightning-spinner variant="brand" alternative-text="Loading" size="medium"></lightning-spinner>
        </template>
        <header class="slds-modal__header">
            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                onclick={closePopup} title="Close">
                <lightning-icon icon-name="utility:close" alternative-text="Close" title="Close" variant="inverse" size="small"></lightning-icon>
            </button>
            <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Create SAP Sales Order</h2>
        </header>
        <div class="slds-modal__content slds-p-around_small height-100" id="modal-content-id-1">
            <template if:true={dataoms}>
                <div class="error-panel">
                    <template if:true={dataoms.isErrorlwc}>  
                        <div class="err-sec">
                            <div class="err-head">Errors</div> 
                            <ul class="slds-list_dotted" style="list-style: disc;line-height: initial;">                                
                                <template for:each={dataoms.errorList} for:item="error">
                                    <li key={error}>{error}</li>
                                </template>
                            </ul> 
                        </div>                                                      
                    </template>
                    <template if:true={ordercreated}>  
                        <div class="err-sec" style="border-color: green;">
                            <div class="err-head" style="color: green;">Success</div> 
                            <ul class="slds-list_dotted" style="list-style: disc;line-height: initial;">                                                                    
                                <li>{dataoms.salesorderno} order created successfully!</li>                                   
                            </ul> 
                        </div>                                                      
                    </template> 
                </div>                  
            </template>
            <template if:true={dataoms}> 
            <lightning-accordion class="create-ret-pop-header" allow-multiple-sections-open
                    onsectiontoggle={handleSectionToggle} active-section-name={activeSections}>
                    <lightning-accordion-section name="A" class="create-ret-pop-sec slds-m-top_x-small" label="Order Header Data">
                        <lightning-tabset class="active-tab-value" active-tab-value={actveTab}>
                            <lightning-tab class="slds-p-top_x-small" label="Main Data" value="one">
                                <template if:true={dataoms}>
                                <table
                                    class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_header-hidden slds-table_bordered main-data-tbl"
                                    aria-label="Order Totals">
                                    <tbody>
                                        <tr class="slds-hint-parent">
                                            <td>
                                                <div title="Case Brand" class="slds-form-element__label">Case Brand</div>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">{dataoms.caseBrand}</div>
                                            </td>
                                            <td>
                                                <div title="Customer PO Number" class="slds-form-element__label">Customer PO Number :</div>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">{dataoms.customerPurchaseOrderNo}</div>
                                            </td>
                                            <td>
                                                <div title="Sales area" class="slds-form-element__label">Sales Area :</div>   
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">{dataoms.caseSalesArea}</div>
                                            </td>
                                            
                                        </tr>
                                        <tr class="slds-hint-parent">
                                            <td>
                                                <div class="slds-form-element__label" title="Order">Order Type :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="OrderType"
                                                value={dataoms.selectedOrderType} placeholder="Select" options={orderTypes}
                                                onchange={setOrderType}>
                                                </lightning-combobox>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__label" title="Brand">Customer Number :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="customerNos"
                                                placeholder="Select" options={customerNos} value={dataoms.selectedCustomerNo}
                                                onchange={updateCurrencyForAccount}
                                                >
                                                </lightning-combobox>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__label" title="Brand">Order Reason :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="orderReasons"
                                                placeholder="Select" options={orderReasons} value={dataoms.selectedOrderReason}
                                                onchange={setorderreason}
                                                >
                                                </lightning-combobox>
                                            </td>
                                            
                                        </tr>
                                        <tr class="slds-hint-parent">
                                            <td>
                                                <div class="slds-form-element__label" title="Brand">Incoterms :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="Incoterms"
                                                placeholder="Select" options={incoterms} value={dataoms.selectedIncoterms}
                                                onchange={setincoterms}
                                                >
                                                </lightning-combobox>
                                            </td>
                                            <td class="slds-hint-parent"> 
                                                <div class="slds-form-element__label">
                                                    Expedite Order Charge :</div>
                                            </td>
                                            <template if:false={dataoms.showExpOrdChg}>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input type="text" class="Expedite" variant="label-hidden" disabled value={dataoms.ordExpediteChg}>
                                                    </lightning-input>
                                                </td>
                                            </template>
                                            <template if:true={dataoms.showExpOrdChg}>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input type="text" class="Expedite"  variant="label-hidden" value={dataoms.ordExpediteChg}>
                                                    </lightning-input>
                                                </td>
                                            </template>
                                            <td class="slds-hint-parent">
                                                <div class="slds-form-element__label">
                                                    Additional Freight Charge:</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-input type="text" class="Freight" variant="label-hidden" onblur={updateAddFreight} disabled={dataoms.sfFreight}  value={dataoms.ordAddFreight}>
                                                </lightning-input>
                                            </td>
                                            
                                        </tr>
                                        <tr>
                                            <td class="slds-hint-parent">
                                                <div class="slds-form-element__label" title="Brand">Shipping Conditions :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="1"
                                                placeholder="Select" options={ordShpCond} value={dataoms.selectedOrdShpCond}
                                                onchange={reCalcFreight}
                                                >
                                                </lightning-combobox>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__label" title="Brand">Delivery Block :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="Delivery"
                                                placeholder="Select" options={ordDelvBlock} value={dataoms.selectedOrdDelvBlock}
                                                onchange={setorderdelivery}
                                                >
                                                </lightning-combobox>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__label" title="Brand">Currency :</div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-combobox variant="label-hidden" name="Currency"
                                                placeholder="Select" options={ordCurr} value={dataoms.selectedOrdCurr}
                                                onchange={reCalcPricing}
                                                >
                                                </lightning-combobox>
                                            </td>
                                        </tr>
                                        <tr>                                            
                                               <td class="slds-hint-parent"> 
                                                    <div class="slds-form-element__label">
                                                        Customer Shipping Instructions :</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                <lightning-input type="text" class="shipping-instruct-val"  value={dataoms.customerShippingInstructions}>
                                                </lightning-input>
                                                </td>
                                            
                                                <td>
                                                    <div class="slds-form-element__label" title="Waive Shipping">Waive Shipping</div>
                                                </td>
                                                <td>
                                                    <lightning-input type="checkbox" variant="label-hidden"
                                                         name="waiveShipping"
                                                         value={dataoms.waiveShipping}
                                                         onchange={reCalcFreight}>
                                                    </lightning-input>
                                                </td>
                                                <td>
                                                    <div class="slds-form-element__label" title="Brand">Billing Block :</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-combobox variant="label-hidden" name="Billing Block"
                                                    placeholder="Select" options={ordBillBlock} value={dataoms.selectedOrdbillBlock}
                                                    onchange={setbillblock}
                                                    >
                                                    </lightning-combobox>
                                                </td>
                                        </tr>
                                        <tr>
                                            <template if:true={dataoms.showDisc}>
                                                <td>
                                                    <div class="slds-form-element__label" title="Brand">Discount :</div>
                                                    
                                                </td>
                                            </template>
                                            <template if:true={dataoms.showDisc}>
                                                <td class="slds-cell-wrap">
                                                
                                                        <lightning-combobox variant="label-hidden" name="Discount"
                                                        placeholder="Select" options={ordDisc} value={dataoms.selectedOrdDisc}
                                                        onchange={applyDiscount}
                                                        >
                                                        </lightning-combobox>
                                                    
                                                </td>
                                            </template>
                                            <template if:false={dataoms.showDisc}><td></td><td></td></template>
                                            <template if:true={dataoms.showContract}>
                                            <td>
                                                
                                                    <div class="slds-form-element__label" title="Contract">Contract # :</div>
                                                
                                            </td>
                                            </template>
                                            <template if:true={dataoms.showContract}>
                                                <td>
                                                    
                                                        <lightning-input type="checkbox" variant="label-hidden"
                                                            name="Contract"
                                                            value={dataoms.contractNumber}>
                                                        </lightning-input>
                                                    
                                                </td>
                                            </template>
                                            <!--<template if:false={dataoms.showContract}><td></td><td></td></td></template>-->
                                            <template if:true={dataoms.sfPricing}>
                                                <td>    
                                                    <div title="Price Book" class="slds-form-element__label">Price Book</div>
                                            
                                                </td>
                                            </template>
                                    
                                            <template if:true={dataoms.sfPricing}>
                                                <td>    
                                                    <div class="slds-form-element__static">{dataoms.priceBookCntryCode}</div>
                                                
                                                </td>
                                            </template>
                                            <!--<template if:false={dataoms.sfPricing}><td></td><td></td></template> -->   
                                            <template if:true={dataoms.sfFreight}>
                                            <td>
                                                
                                                    <div title="Suggested Freight" class="slds-form-element__label">Suggested Freight</div>
                                                
                                            </td>
                                        </template>
                                        <template if:true={dataoms.sfFreight}> 
                                            <td>
                                                
                                                    <div class="slds-form-element__static">{dataoms.ordSugFreight}</div>
                                                
                                            </td>
                                        </template>
                                        <template if:false={dataoms.sfFreight}><td></td><td></td></template>
                                        </tr>                                          
                                    </tbody>
                                </table>
                            </template>  
                            </lightning-tab>
                            <lightning-tab label="Address" onactive={handleAdressActive} title="Address" value="two">
                                <template if:true={dataoms}>                                                                
                                    <div class="adress-check-tbl-container">
                                        <table
                                            class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_header-hidden adress-check-tbl">
                                            <tr>
                                                <td style="width:35%;">
                                                    <lightning-input type="checkbox" onchange={cbShpAddr}
                                                        class="cb-ship-addr" label="Shipping Address"
                                                        name="shipAddr" id="shipAddr" checked={dataoms.shpAddr}></lightning-input>
                                                </td>
                                                <td style="width:34%;">
                                                    <lightning-input type="checkbox" onchange={cbConAddr}
                                                        class="cb-con-ship-addr" label="Contact Shipping Address"
                                                        name="conShipAddr" id="conShipAddr" checked={dataoms.conAddr}></lightning-input>
                                                </td>
                                                <td>
                                                    <lightning-input type="checkbox" onchange={ccAddressFill}
                                                        class="use-ship-addr" label="Use Shipping Address"
                                                        name="useShipAddr" id="useShipAddr"></lightning-input>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td>
                                                    <lightning-input type="checkbox" onchange={updateConAddr}
                                                        label="Update Contact Address" class="update-con-addr"
                                                        name="updateConAddr" id="updateConAddr"></lightning-input>
                                                </td>
                                                <td>
                                                    <lightning-input type="checkbox" onchange={ccAddressFill}
                                                        label="Use Contact Address" class="use-con-addr"
                                                        name="useConAddr" id="useConAddr" checked={dataoms.ccConAddr}></lightning-input>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td>
                                                    <lightning-input type="checkbox" onchange={ccAddressFill}
                                                        label="New Billing Address" class="new-bill-addr"
                                                        name="newBillAddr" id="newBillAddr" checked={dataoms.ccBillAddr}></lightning-input>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <table
                                        class="slds-table slds-table_cell-buffer slds-table_header-hidden slds-no-row-hover slds-table_bordered ship-addr-tbl"
                                        aria-label="Shipping/Billing Address">
                                        <tbody>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Country Code">
                                                    <div class="slds-form-element__label" title="Country Code">
                                                        Country Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-cc-val" name="CountryCode" id="CountryCode" 
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrCountry}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Country Code">
                                                    <div class="slds-form-element__label" title="Country Code">
                                                        Country Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-cc-val" name="CountryCode" id="CountryConCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrCountry}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Country Code">
                                                    <div class="slds-form-element__label" title="Country Code">
                                                     Billing  Country Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-cc-val"
                                                        name="CountryCode" id="CountryBillCode" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrCountry}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="First Name">
                                                    <div class="slds-form-element__label" title="Name">
                                                        Name
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-fn-val" name="firstName" id="firstName"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrName}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="First Name">
                                                    <div class="slds-form-element__label" title="Name">
                                                        Name
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-fn-val" name="firstNameCon" id="firstNameCon"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrName}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="First Name">
                                                    <div class="slds-form-element__label" title="Billing Name">
                                                        Billing Name
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-fn-val"
                                                        name="firstNameBill" id="firstNameBill" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrName}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Lastv Name">
                                                    <div class="slds-form-element__label" title="Last Name">
                                                        Name2
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-ln-val" name="CountryCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrName2}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Lastv Name">
                                                    <div class="slds-form-element__label" title="Last Name">
                                                        Name2
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-ln-val" name="CountryCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrName2}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                               <!-- <td data-label="Lastv Name">
                                                    <div class="slds-form-element__label" title="Last Name">Last
                                                        Name
                                                    </div>
                                                </td> 
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-ln-val"
                                                        name="CountryCode" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrName2}>
                                                    </lightning-input>
                                                </td>-->
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Company Name">
                                                    <div class="slds-form-element__label" title="Company Name">
                                                        Company Name
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-cn-val" name="CountryCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrCompanyName}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Company Name">
                                                    <div class="slds-form-element__label" title="Company Name">
                                                        Company Name
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-cn-val" name="CountryCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrCompanyName}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Company Name">
                                                    <div class="slds-form-element__label" title="Company Name">
                                                        Company Name
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-cn-val"
                                                        name="CountryCode" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrCompanyName}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Street">
                                                    <div class="slds-form-element__label" title="Street">Street
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-st-val" name="shipStreet" id="shipStreet"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrStreet}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Street">
                                                    <div class="slds-form-element__label" title="Street">Street
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-st-val" name="conStreet" id="conStreet"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrStreet}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Street">
                                                    <div class="slds-form-element__label" title="Street">Billing Street
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-st-val"
                                                        name="billStreet" id="billStreet" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrStreet}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                              <tr class="slds-hint-parent">
                                                <td data-label="Street">
                                                    <div class="slds-form-element__label" title="Street">Street2
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-st-val2" name="shipStreet2" id="shipStreet2"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrStreet2}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Street">
                                                    <div class="slds-form-element__label" title="Street">Street2
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-st-val2" name="conStreet2" id="conStreet2"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrStreet2}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="City">
                                                    <div class="slds-form-element__label" title="City">City</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-ct-val" name="shipCt" id="shipCt"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrCity}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="City">
                                                    <div class="slds-form-element__label" title="City">City</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-ct-val" name="conCt" id="conCt"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrCity}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="City">
                                                    <div class="slds-form-element__label" title="City">Billing City</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-ct-val" 
                                                        name="billCt" id="billCt" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrCity}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="State">
                                                    <div class="slds-form-element__label" title="State">
                                                        State/Province Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-sc-val" name="shipState"
                                                        type="text" id="shipState" variant="label-hidden"
                                                        value={dataoms.shpAddrState}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="State">
                                                    <div class="slds-form-element__label" title="State">
                                                        State/Province Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-sc-val" name="conState" id="conState"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrState}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="State">
                                                    <div class="slds-form-element__label" title="State">Billing State Code
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-sc-val"
                                                        name="billState" id="billState" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrState}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Zip/Postal Code">
                                                    <div class="slds-form-element__label" title="Zip/Postal Code">
                                                        Zip/Postal Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-pc-val" name="shipPc" id="shipPc" 
                                                        type="text"  variant="label-hidden"
                                                        value={dataoms.shpAddrZipCode}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Zip/Postal Code">
                                                    <div class="slds-form-element__label" title="Billing Zip/Postal Code">
                                                        Zip/Postal Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-pc-val" name="conPc" id="conPc" 
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrZipCode}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Zip/Postal Code">
                                                    <div class="slds-form-element__label" title="Zip/Postal Code">
                                                        Billing Zip/Postal Code</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-pc-val"
                                                        name="billPc" id="billPc" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrZipCode}>
                                                    </lightning-input>
                                                </td>
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Email">
                                                    <div class="slds-form-element__label" title="Email">Email</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-mail-val" name="shipMail"
                                                        type="text" id="shipMail" variant="label-hidden"
                                                        value={dataoms.shpAddrEmail}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Email">
                                                    <div class="slds-form-element__label" title="Email">Email</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-mail-val" name="conMail"
                                                        type="text" id="conMail" variant="label-hidden"
                                                        value={dataoms.conAddrEmail}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <!--
                                                <td data-label="Email">
                                                    <div class="slds-form-element__label" title="Email">Email</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-mail-val"
                                                        name="CountryCode" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrEmail}>
                                                    </lightning-input>
                                                </td> -->
                                            </tr>
                                            <tr class="slds-hint-parent">
                                                <td data-label="Phone">
                                                    <div class="slds-form-element__label" title="Phone">Phone</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="ship-ph-val" name="CountryCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.shpAddrPhone}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td data-label="Phone">
                                                    <div class="slds-form-element__label" title="Phone">Phone</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="con-ph-val" name="CountryCode"
                                                        type="text" variant="label-hidden"
                                                        value={dataoms.conAddrPhone}>
                                                    </lightning-input>
                                                </td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <!--
                                                <td data-label="Phone">
                                                    <div class="slds-form-element__label" title="Phone">Phone</div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input class="billing-addr-field bill-ph-val"
                                                        name="CountryCode" type="text" variant="label-hidden"
                                                        value={dataoms.ccAddrPhone}>
                                                    </lightning-input>
                                                </td>-->
                                            </tr>
                                        </tbody>
                                    </table>
                              </template>  
                            </lightning-tab>
                            <template if:true={dataoms.ccOrderPhone}> 
                                <lightning-tab label="Credit Card" title="Credit Card" value="three" onactive={handleCreditClick}>
                                    <template if:true={dataoms}>
                                        <template if:false={dataoms.ccIsTokenized}>
                                            <article class="slds-card" style="width:40%;">
                                                <div class="slds-card__body slds-card__body_inner">
                                                    <div class="slds-grid slds-wrap line-height-initial">
                                                        <iframe  height="425px" style="border:none;" width="100%" src={siteUrl}></iframe>
                                                    </div>                                         
                                                </div>
                                            </article>
                                        </template>
                                        <template if:true={dataoms.ccIsTokenized}>
                                            <div class="slds-form-element__label" title="CC Tokenized">Credit Card Info Tokenized Successfully !!</div>
                                             <div class="slds-p-bottom_xx-small align-left">
                                                <lightning-button label="Enter new Credit Card info"  data-cat="Parent" onclick={reTokenizeCC} ></lightning-button>
                                             </div>                                                       
                                         </template>
                                    </template>
                                </lightning-tab>
                            </template>                                                                      
                        </lightning-tabset>
                    </lightning-accordion-section>
                    <lightning-accordion-section name="C" class="create-ret-pop-sec slds-m-top_x-small" label="Order Totals">
                        <template if:true={dataoms}>
                            <table
                            class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_col-bordered slds-m-bottom_medium slds-m-top_x-small slds-table_header-hidden slds-table_bordered order-totals-tbl"
                            aria-label="Order Totals">
                            <tr class="slds-hint-parent">
                                <td class="width-30">
                                    <div title="Item Total">Item Total</div>
                                </td>
                                <td>
                                    <lightning-formatted-number value={dataoms.simItemTotal} minimum-fraction-digits="2"></lightning-formatted-number>                                         
                                </td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <td class="width-30">
                                    <div title="Freight">Freight</div>
                                </td>
                                <td>
                                    <lightning-formatted-number value={dataoms.simOrderFreight} minimum-fraction-digits="2"></lightning-formatted-number>                                           
                                </td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <td class="width-30">
                                    <div title="Discounts">Discounts</div>
                                </td>
                                <td>
                                    <lightning-formatted-number value={dataoms.simOrderDiscount} minimum-fraction-digits="2"></lightning-formatted-number>                                            
                                </td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <td class="width-30">
                                    <div title="Taxes">Taxes</div>
                                </td>
                                <td>
                                     <lightning-formatted-number value={dataoms.simOrderTaxes} minimum-fraction-digits="2"></lightning-formatted-number>                                            
                                </td>
                            </tr>
                            <tr class="slds-hint-parent">
                                <td class="width-30">
                                    <div title="SubTotal">SubTotal</div>
                                </td>
                                <td>
                                    <lightning-formatted-number value={dataoms.simOrderTotalInclTax} minimum-fraction-digits="2"></lightning-formatted-number>                                          
                                </td>
                            </tr>
                        </table>
                        </template>
                    </lightning-accordion-section>
                
                    
                        <lightning-accordion-section name="E" class="create-ret-pop-sec slds-m-top_x-small" label="Case Products">
                            <div class="slds-p-bottom_xx-small align-center">
                                <button class="slds-button slds-button_neutral" data-cat="Parent" disabled={dataoms.gmStatus}
                                    onclick={addAllProductsToCart}>Add All</button>
                            </div>
                            <table class="slds-table slds-table_cell-buffer slds-table_col-bordered slds-table_bordered order-items-tbl slds-m-bottom_x-small"
                                aria-label="Case Products" style="table-layout: fixed;">                              
                                <thead>
                                    <tr class="slds-line-height_reset">
                                        <th scope="col" style="width:7%">
                                            <div title="Action">Action</div>
                                        </th>
                                        <th scope="col" style="width:6%">
                                            <div title="BOM">BOM</div>
                                        </th>                                       
                                        <th scope="col" class="slds-cell-wrap" style="width:9%">
                                            <div title="Product Number">Product Number
                                            </div>
                                        </th>
                                        <th scope="col" style="width:14%">
                                            <div title="Description">Description</div>
                                        </th> 
                                        <th scope="col" style="width:9%">
                                            <div title="Quantity">Quantity</div>
                                        </th>                                     
                                        <th scope="col" style="width:6%">
                                            <div title="UoM">UoM
                                            </div>
                                        </th>
                                        <th scope="col" style="width:6%">
                                            <div title="Price">Price</div>
                                        </th>
                                        <th scope="col" style="width:5%">
                                            <div title="Obsolete">Obsolete</div>
                                        </th>  
                                        <th scope="col" style="width:4%">
                                            <div title="Status">Status</div>
                                        </th>
                                        <th scope="col" style="width:7%">
                                            <div title="Replaceable">Replaceable</div>
                                        </th>  
                                    </tr>
                                </thead>
                                <tbody>
                                    <template if:true={dataoms}>
                                        <template for:each={dataoms.caseProductsList} for:item="cp">
                                            <tr key={cp.materialId} class="slds-hint-parent">  
                                                <td class="slds-cell-wrap">
                                                    <template if:false={dataoms.gmStatus}>                                                     
                                                        <lightning-button label="Add" data-id={cp.materialId} disabled={cp.disableBtn} data-cat="Parent" onclick={addProductsToOrder} ></lightning-button>                                                       
                                                    </template>   
                                                </td>
                                                <template if:false={cp.bomComponents}>
                                                    <td class="slds-cell-wrap"> 
                                                            <template if:false={dataoms.gmStatus}>
                                                                <lightning-button class="ExplodeBOM" disabled label="BOM" data-id={cp.materialId} data-cpid={cp.caseProductId} onclick={explodeBom}></lightning-button>                                                    
                                                            </template>                                                                                                                   
                                                    </td>
                                                </template>
                                                <template if:true={cp.bomComponents}>
                                                    <td class="slds-cell-wrap"> 
                                                            <template if:false={dataoms.gmStatus}>
                                                                <lightning-button class="ExplodeBOM" label="BOM" data-id={cp.materialId} data-cpid={cp.caseProductId} onclick={explodeBom}></lightning-button>                                                    
                                                            </template>                                                                                                                   
                                                    </td>
                                                </template>       
                                                <td class="slds-cell-wrap">
                                                    <div class="slds-form-element__static">                                                 
                                                        <a href="#" data-id={cp.materialId} onclick={openRecord}>{cp.materialNumber}</a>
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <div class="slds-form-element__static">
                                                        {cp.materialDescription}
                                                    </div>
                                                </td>                                       
                                                <td class="slds-cell-wrap">
                                                    <template if:false={dataoms.gmStatus}>
                                                        <lightning-input type="number"  data-id={cp.materialId} onkeyup={bindProdQuantity} variant="label-hidden"
                                                            value={cp.quantity} required></lightning-input>
                                                    </template>
                                                    <template if:true={dataoms.gmStatus}>
                                                        <div class="slds-form-element__static">
                                                            <lightning-input type="text"  data-id={cp.materialId} variant="label-hidden" value={cp.quantity} required></lightning-input>
                                                        </div>
                                                    </template>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <div class="slds-form-element__static">{cp.quantityUom}
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="slds-form-element__static">{cp.msrp}
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input type="checkbox" variant="label-hidden"
                                                        value={cp.obsolete} checked={cp.obsolete}  disabled></lightning-input>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <div class="slds-form-element__static">{cp.sapMatStatus}
                                                    </div>
                                                </td>
                                                <td class="slds-cell-wrap">
                                                    <lightning-input type="checkbox" variant="label-hidden" value={cp.replaceable} disabled></lightning-input>
                                                </td>                                            
                                            </tr> 
                                        </template>       
                                    </template>                                                                                                        
                                </tbody>
                            </table>
                        </lightning-accordion-section>
                    
                    <lightning-accordion-section name="F" class="create-ret-pop-sec slds-m-top_x-small" label="BOM Components">
                        <div class="slds-p-bottom_xx-small align-center">
                            <template if:false={isBomCompListEmpty}>
                                <button class="slds-button slds-button_neutral slds-p-right_small" data-cat="Child" 
                                onclick={addAllProductsToCart}>Add All</button>
                                <button class="slds-button slds-button_neutral" 
                                onclick={clearBomComponents}>Clear</button>
                            </template>                                   
                        </div>
                        <table class="slds-table slds-table_cell-buffer slds-table_col-bordered slds-table_bordered order-items-tbl slds-m-top_x-small slds-m-bottom_x-small"
                            aria-label="BOM Components" style="table-layout: fixed;">                              
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th scope="col" style="width:8%">
                                        <div title="Action">Action</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap" style="width:8%">
                                        <div title="Component Number">Component Number</div>
                                    </th>                                       
                                    <th scope="col" class="slds-cell-wrap" style="width:16%">
                                        <div title="Component Description">Component Description
                                        </div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap" style="width:7%">
                                        <div title="Parent Product">Parent Product</div>
                                    </th> 
                                    <th scope="col" class="slds-cell-wrap" style="width:16%">
                                        <div title="Product Description">Product Description</div>
                                    </th>  
                                    <th scope="col" style="width:8%">
                                        <div title="Quantity">Quantity</div>
                                    </th>                                    
                                    <th scope="col" style="width:4%">
                                        <div title="UoM">UoM
                                        </div>
                                    </th>
                                    <th scope="col" style="width:5%">
                                        <div title="Price">Price</div>
                                    </th>                                      
                                    <th scope="col" style="width:6%">
                                        <div title="Obsolete">Obsolete</div>
                                    </th>  
                                    <th scope="col" style="width:5%">
                                        <div title="Status">Status</div>
                                    </th>
                                    <th scope="col" style="width:8%">
                                        <div title="Replaceable">Replaceable</div>
                                    </th>  
                                </tr>
                            </thead>
                            <tbody>
                                <template if:true={dataoms}>
                                    <template for:each={dataoms.bomComponentsList} for:item="bc">
                                        <tr key={bc.componentId} class="slds-hint-parent">  
                                            <template if:false={dataoms.gmStatus}>
                                                <td class="slds-cell-wrap">
                                                    <div class="slds-form-element__static">
                                                        <lightning-button label="Add" data-id={bc.componentId} data-cat="Child" onclick={addProductsToOrder} disabled={bc.disableBtn}></lightning-button>
                                                    </div>
                                                </td>
                                            </template>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">
                                                    <a href="#" data-id={bc.componentId} onclick={openRecord}>{bc.componentNumber}</a>
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">                                                 
                                                    {bc.componentDescription}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">                                                 
                                                    {bc.parentNumber}
                                                </div>
                                            </td>                                         
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">
                                                    {bc.parentDescription}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">bindBOMQuantity
                                                <lightning-input type="text" variant="label-hidden" data-id={bc.componentId} value={bc.quantity} onkeyup={bindBOMQuantity}  required></lightning-input>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">{bc.quantityUom}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">{bc.msrp}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-input type="checkbox" variant="label-hidden" value={bc.obsolete} disabled></lightning-input>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">{bc.sapMatStatus}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <lightning-input type="checkbox" variant="label-hidden" value={bc.replaceable} disabled></lightning-input>
                                            </td>                                           
                                        </tr> 
                                    </template>       
                                </template>                                                                                                        
                            </tbody>
                        </table>
                    </lightning-accordion-section>    
                    <lightning-accordion-section name="G" class="create-ret-pop-sec slds-m-top_x-small" label="Cart : Order Products">
                        
                        <template if:false={isOrderProdListEmpty}>
                            <div class="slds-grid slds-gutters">
                               <div class="slds-col slds-size_1-of-3"></div>
                               <div class="slds-col slds-size_1-of-3">
                                <button class="slds-button slds-button_neutral" data-cat="Remove All" 
                                disabled={dataoms.gmStatus} onclick={remAllProductsFromCart}>Remove All</button>
                                <template if:false={dataoms.focOrder}>
                                
                                    <button class="slds-button slds-button_neutral" data-cat="All Free" 
                                    disabled={dataoms.gmStatus} onclick={updateProductsInCart}>All Free</button>                               
                                </template>
                                </div>
                                <div class="slds-col slds-size_1-of-3">
                                <template if:false={dataoms.focOrder}>    
                                <span>{dataoms.ordTotalTxt}</span>
                                </template>
                                </div>
                                <div class="slds-col slds-size_1-of-3"> 
                                <template if:true={dataoms.focOrder}>
                                 <span>Total Price:0.00{dataoms.selectedOrdCurr}</span>                                        
                                </template>
                                </div>
                             </div>      
                        </template>
                       
                        <table class="slds-table slds-table_cell-buffer slds-table_col-bordered slds-table_bordered order-items-tbl slds-m-top_x-small slds-m-bottom_x-small"
                            aria-label="Cart : Order Products" style="table-layout: fixed;">                              
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th scope="col" style="width:5%">
                                        <div title="Action">Action</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Material Number">Material Number</div>
                                    </th>                                       
                                    <th scope="col" class="slds-cell-wrap" style="width:16%">
                                        <div title="Material Description">Material Description
                                        </div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Item Level Discount">Item Level Discount</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Order Quantity">Order Quantity</div>
                                    </th> 
                                    <th scope="col" style="width:7%">
                                        <div title="UOM">UOM</div>
                                    </th>  
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Shipping Point">Shipping Point</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Plant">Plant</div>
                                    </th>                                       
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Item Notes">Item Notes
                                        </div>
                                    </th>
                                    <th scope="col" style="width:8%">
                                        <div title="List Price Override">List Price Override</div>
                                    </th>                                      
                                    <th scope="col" class="slds-cell-wrap" >
                                        <div title="Price">Price</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Free">Free</div>
                                    </th>
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Material Availability Date">Material Availability Date</div>
                                    </th> 
                                    <th scope="col" class="slds-cell-wrap">
                                        <div title="Currently Available">Currently Available</div>
                                    </th>                                           
                                </tr>
                            </thead>
                            <tbody>
                                <template if:true={dataoms}>
                                    <template for:each={dataoms.orderProductsList} for:item="op">
                                        <tr key={op.materialId} class="slds-hint-parent">                                                 
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">                                                                                                            
                                                    <img src={cross} alt={cross} data-id={op.materialNumber} onclick={removeProductsFromOrder}/>
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">
                                                    <a href="#" data-id={op.materialId} onclick={openRecord}>{op.materialNumber}</a>
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">                                                 
                                                    {op.materialDesc}
                                                </div>
                                            </td>                                         
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">
                                                    <lightning-combobox name="iDiscount" variant="label-hidden"
                                                    value={op.itemLevelDiscountCode} placeholder="Select" data-id={op.materialId}
                                                    options={itemLevelDiscounts} onchange={UpdateOPDiscount}>
                                                </lightning-combobox>
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">                                                 
                                                    {op.quantity}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <div class="slds-form-element__static">
                                                    <lightning-input type="text" variant="label-hidden" data-id={op.materialId} value={op.quantityUom} required></lightning-input> 
                                                </div>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">
                                                    <lightning-input type="text" variant="label-hidden" data-id={op.materialId} value={op.shippingPoint} required></lightning-input>  
                                                </div>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">
                                                    <lightning-input type="text" variant="label-hidden" data-id={op.materialId} value={op.plant} required></lightning-input>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">
                                                    <lightning-input type="text" variant="label-hidden" data-id={op.materialId} value={op.mtoText} required></lightning-input>
                                                </div>
                                            </td>
                                            <td>
                                                <template if:false={dataoms.sfPriceOvr}>
                                                    <div class="slds-form-element__static" data-id="so__ordPrcOvr">
                                                        <lightning-input type="text" variant="label-hidden" data-id={op.materialId} value={op.priceOverride} required></lightning-input>
                                                    </div>
                                                </template>
                                                <template if:true={dataoms.sfPriceOvr}>
                                                    <lightning-input type="text" variant="label-hidden" data-id={op.materialId} value={op.priceOverride} onkeyup={bindorderprice}  required></lightning-input>  
                                                </template>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">{op.discountprice}
                                                </div>
                                            </td>
                                            <td>
                                                <template if:false={isOrderProdListEmpty}>
                                                <template if:false={dataoms.focOrder}>
                                                    <lightning-input type="checkbox" data-id={op.materialId} variant="label-hidden" value={op.free} onchange={updateTotalPrice} disabled={dataoms.gmStatus}></lightning-input>       
                                                </template>
                                                </template>
                                            </td>
                                            <td>
                                                <div class="slds-form-element__static">{op.scheduleDate}
                                                </div>
                                            </td>
                                            <td class="slds-cell-wrap">
                                                <c-product-availability-flag flag-green={flagGreen} flag-yellow={flagYellow} flag-red={flagRed} is-available={op.currentlyAvailable}></c-product-availability-flag>                                                                                                                                                                  
                                            </td>                                            
                                        </tr> 
                                    </template>       
                                </template>                                                                                                        
                            </tbody>
                        </table>
                    </lightning-accordion-section>     
            </lightning-accordion>
        </template> 
        </div>
        <footer class="slds-modal__footer">
            <button onclick={closePopup} class="slds-button slds-button_neutral">Cancel</button>
                <button class="slds-button slds-button_brand" onclick={reCalcFreight}>Recalculate Freight</button>                               

            <button class="slds-button slds-button_brand" onclick={simulateSalesOrder}>Simulate Order</button>
            <button class="slds-button slds-button_brand" onclick={createSapSalesOrder}>Create Order</button>                                               
        </footer>    
    </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>    
</template>